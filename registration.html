<!DOCTYPE html>
<html>
	<head>
		<title>Book Swap</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript">
			function validateNotEmpty(x, y){
			  var input = document.getElementById(x).value;
			  if (input == ""){
			    document.getElementById(y).innerHTML = "This field must not be empty.<br/><br/>";
			    return false;
			  }
			  return true;
			}

			function validateEmail(x){
			  var atCount = 0;
			  for (var i = 0; i < x.length; i++){
			    if (x[i] == '@'){
			      atCount++;
			    }
			  }
			  var pattern = /\S+@\S+\.[(com)|(edu)|(net)]/;
			  var match = pattern.test(x);

			  if ((!match) || (atCount != 1)){
			    return false;
			  }
			  else {
			    return true;
			  }
			}

			function validateNumber(x){
			  var pattern1 = /^0\d{8}/;
			  var pattern2 = /^02\d{8}/;

			  if ((pattern1.test(x)) || (pattern2.test(x))){
			    return true;
			  }
			  else {
			    return false;
			  }
			}
			function validateRegistrationForm(){
				document.getElementById("validateFname").innerHTML = "";
				document.getElementById("validateLname").innerHTML = "";
				document.getElementById("validateAddress").innerHTML = "";
				document.getElementById("validateNumber").innerHTML = "";
				document.getElementById("validateEmail").innerHTML = "";
				document.getElementById("validateUserReg").innerHTML = "";
				document.getElementById("validatePassReg").innerHTML = "";
				document.getElementById("validateConPass").innerHTML = "";

				var fname = document.getElementById("fname").value;
				var lname = document.getElementById("lname").value;
				var address = document.getElementById("address").value;
				var number = document.getElementById("number").value;
				var email = document.getElementById("email").value;
				var user = document.getElementById("user").value;
				var pass = document.getElementById("pass").value;
				var conpass = document.getElementById("conpass").value;

				var error = false;

				if (!(validateNotEmpty('fname', 'validateFname'))){
					error = true;
				}
				if (!(validateNotEmpty('lname', 'validateLname'))){
					error = true;
				}
				if (!(validateNotEmpty('address', 'validateAddress'))){
					error = true;
				}
				if (!(validateNotEmpty('number', 'validateNumber'))){
					error = true;
				}
				if (!(validateNotEmpty('email', 'validateEmail'))){
					error = true;
				}
				if (!(validateNotEmpty('user', 'validateUserReg'))){
					error = true;
				}
				if (!(validateNotEmpty('pass', 'validatePassReg'))){
					error = true;
				}
				if (!(validateNotEmpty('conpass', 'validateConPass'))){
					error = true;
				}
				if (user.length < 6){
					document.getElementById("validateUserReg").innerHTML = "Username must be at least 6 characters.";
					error = true;
				}
				if (pass.length < 6){
					document.getElementById("validatePassReg").innerHTML = "Password must be at least 6 characters.";
					error = true;
				}
				if (pass != conpass){
					document.getElementById("validateConPass").innerHTML = "Confirm password field must match the password field.";
					error = true;
				}
				if (!(validateEmail(email))){
					document.getElementById("validateEmail").innerHTML = "Invalid email";
					error = true;
				}
				if (!(validateNumber(number))){
					document.getElementById("validateNumber").innerHTML = "Invalid number";
					error = true;
				}

				if (error){
					return false;
				}
				else {
					alert("Registration Successful!");
					return true;
				}
			}
		</script>
	</head>
	<body>
		<div id="header">
			<img id="logo" src="logo.png">
			<h1>Book Swap</h1>
			<div id="nav">
				<ul>
					<li><a href="home.html">Home</a></li>
					<li><a href="registration.html">Register</a></li>
					<li><a href="login.html">Login</a></li>
          <li><a href="sell.html">Sell</a></li>
					<li><a href="search.html">Search</a></li>
				</ul>
			</div>
		</div>
		<div class="main">
			<div class="topSection" id="regTopSection">
				<h2>Registration</h2>
        <p>Please fill in the following form and click submit to register:</p>
        <p>You only need to register once - if you've already registered, head to the 'Login' page instead.</p>
        <form action="#" method="POST" onsubmit="return validateRegistrationForm()">
        	<div class="row">
        		<label for="fname">First Name:</label><br />
        		<input id="fname" name="fname" type="text" value="" /><br />
						<div class="validate" id="validateFname"></div>
        	</div>
          <div class="row">
        		<label for="lname">Last Name:</label><br />
        		<input id="lname" name="lname" type="text" value="" /><br />
						<div class="validate" id="validateLname"></div>
        	</div>
          <div class="row">
        		<label for="address">Address:</label><br />
        		<input id="address" name="address" type="text" value="" /><br />
						<div class="validate" id="validateAddress"></div>
        	</div>
          <div class="row">
        		<label for="number">Phone Number:</label><br />
        		<input id="number" name="number" type="text" value="" /><br />
						<div class="validate" id="validateNumber"></div>
        	</div>
        	<div class="row">
        		<label for="email">Your email:</label><br />
        		<input id="email" name="email" type="text" value="" /><br />
						<div class="validate" id="validateEmail"></div>
        	</div>
          <div class="row">
        		<label for="user">Username:</label><br />
        		<input id="user" name="user" type="text" value="" /><br />
						<div class="validate" id="validateUserReg"></div>
        	</div>
          <div class="row">
        		<label for="pass">Password:</label><br />
        		<input id="pass" name="pass" type="text" value="" /><br />
						<div class="validate" id="validatePassReg"></div>
        	</div>
          <div class="row">
        		<label for="conpass">Confirm Password:</label><br />
        		<input id="conpass" name="conpass" type="text" value="" /><br />
						<div class="validate" id="validateConPass"></div>
        	</div>
        	<br /><input class="submit_button" type="submit" value="Submit" />
        </form>
      </div>
		</div>
		<div id="footer">
			<p>&copy; Copyright Book Swap 2016</p>
		</div>
	</body>
</html>
